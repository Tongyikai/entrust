<!DOCTYPE html>
<html Lang="en">
<head>
    <meta charset="UTF-8">
    <title>ENTRUST</title>
    <!-- <link rel="stylesheet" href="style.css"> -->
    <link rel="stylesheet" href="public/stylesheets/index.css">
</head>
<body>
    <section>
        <div class="container">
            <span></span>
            <span></span>
            <span></span>
            <form id="signinForm" name="signinForm">
                <h2>Login</h2>
                <div class="inputBox">
                    <input type="text" name="Username" placeholder="Username">
                </div>
                <div class="inputBox">
                    <input type="password" name="Password" placeholder="Password">
                </div>
                <div class="inputBox group">
                    <a href="#">Forgot Password</a>
                    <a href="#" id="signup">Signup</a>
                </div>
                <div class="inputBox">
                    <input type="button" value="Signin" onclick="checkSigninForm();">
                </div>
            </form>
            <form id="signupForm" name="signupForm">
                <h2>Registration</h2>
                <div class="inputBox">
                    <input type="text" name="Username" placeholder="Username">
                </div>
                <div class="inputBox">
                    <input type="text" name="emailAddress" placeholder="Email Address">
                </div>
                <div class="inputBox">
                    <input type="password" name="createPassword" placeholder="Create Password">
                </div>
                <div class="inputBox">
                    <input type="password" name="confirmPassword" placeholder="Confirm Password">
                </div>
                <div class="inputBox">
                    <input type="button" value="RegisterAccount" onclick="checkSignupForm();">
                </div>
                <div class="inputBox group">
                    <a href="#">Already Have an Account ? <b id="signin">Login</b></a>
                </div>
            </form>
        </div>
    </section>
    <script type="text/javascript" src="public/scripts/formCheck.js"></script>
    <script type="text/javascript" src="public/scripts/clientAJAX.js"></script>
    <script>
        // 切換Sign in & Sign up 功能
        let signup = document.querySelector('#signup');
        let signin = document.querySelector('#signin');
        let body = document.querySelector('body');
        signup.onclick = function() {
            body.classList.add('signup');
        }
        signin.onclick = function() {
            body.classList.remove('signup');
        }

        let emailCorrect = checkEmailFormat;
        let nameCorrect = checkNameFormat;
        let passwordCorrect = checkPasswordFormat;
        let blankOrEmpty = checkBlankFormat;
        let visitAjax = helloAjax;
        // 登入表單檢查
        function checkSigninForm() {
            var form = document.forms[ "signinForm" ];
            // client端自行檢查格式是否正確--第1關卡
            if ( nameCorrect( form.Username.value ) ) {
                alert( "Error: Name exceeds 24 characters." );

            } else if ( blankOrEmpty( form.Username.value ) ) {
                alert( "Error: Invalid Name." );

            } else if ( !passwordCorrect( form.Password.value ) ) {
                alert( "Error: Password 8 to 16 characters, uppercase English words, Need numbers." );

            } else {
                alert( visitAjax( "hello" ) );
                // Ajax訪問Server使用者名稱可否使用--第2關卡
                // form.submit();
                
            }
        }

        // 註冊表單價差
        function checkSignupForm() {
            var form = document.forms[ "signupForm" ];
            if ( nameCorrect( form.Username.value ) ) {
                alert( "Error: Name exceeds 24 characters." );

            } else if ( blankOrEmpty( form.Username.value ) ) {
                alert( "Error: Invalid Name." );

            } else if ( !emailCorrect( form.emailAddress.value ) ) {
                alert( "Error: Invalid Email." );

            } else if ( !passwordCorrect( form.createPassword.value ) ) {
                alert( "Error: Password 8 to 16 characters, uppercase English words, Need numbers." );

            } else if ( form.createPassword.value != form.confirmPassword.value ) {
                alert( "Error: Passwords are not the same." );

            } else {
                alert( "send" );
                form.submit();
            }
        }
    </script>
</body>
</html>